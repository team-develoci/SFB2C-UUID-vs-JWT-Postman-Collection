# UUID vs JWT Postman Collection for Saleforce B2C Commerce

Welcome to the Develoci UUID vs JWT Postman Collection for Saleforce B2C Commerce! This collection contains a series of pre-configured API requests for testing and development purposes about how to switch from UUID to JWT token on Salesforce B2C Commerce. You can use this collection to test and later update into your e-commerce project as you need.

## Before Use

Before using the UUID vs JWT Postman Collection, you'll need to follow these steps:

1. Create a key pair with OpenSSL (or OpenSSH, or any other tool you prefer). OpenSSL is usually built in on Linux systems. For Windows, it should be built in on GitBash. For OpenSSL, you can run `openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes` to create a `cert.pem` (Certificate/public key) and `key.pem` (Private key).
2. Create a Client ID for the desired domain and instances on Account Manager. Give it the desired allowed scopes. See: [Authorization Scopes Catalog](https://developer.salesforce.com/docs/commerce/commerce-api/guide/auth-z-scope-catalog.html)
3. Save and store your Client Secret.
4. Select `private_key_jwt` as the Auth Method.
5. On the `Client JWT Bearer Public Key` field, paste the content of the `cert.pem` file.
6. Configure the `client_id` on your Open Commerce API Settings (on Business Manager), and give it the following permissions for each API:

SHOP API:
```json
{
  "client_id": "<client_id>",
  "resources": [
		{
			"resource_id": "/orders/*",
			"methods": [
				"get",
				"patch"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		},
		{
			"resource_id": "/customers/*",
			"methods": [
				"get",
				"post"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		},
		{
			"resource_id": "/product_search",
			"methods": [
				"get"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		},
		{
			"resource_id": "/products/*",
			"methods": [
				"get"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		},
		{
			"resource_id": "/order_search",
			"methods": [
				"post"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		},
		{
			"resource_id": "/sessions",
			"methods": [
				"post"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		}
  ]
}
```

SHOP API:
```json
{
	"client_id": "a290d164-39c3-4b43-98d8-112a365ae191",
	"resources": [
		{
			"resource_id": "/inventory_lists/*/product_inventory_records",
			"methods": [
				"get"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		},
		{
			"resource_id": "/product_search",
			"methods": [
				"post"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		},
		{
			"resource_id": "/inventory_lists/*/product_inventory_records/*",
			"methods": [
				"get",
				"patch",
				"put"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		},
		{
			"resource_id": "/products/*",
			"methods": [
				"get",
				"patch",
				"put"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		},
		{
			"resource_id": "/customer_lists/*/customer_search",
			"methods": [
				"post"
			],
			"read_attributes": "(**)",
			"write_attributes": "(**)"
		}
	]
}
```

## Getting Started

To get started with the Postman Collection, you'll need to follow these steps:

1. [Download and install Postman](https://www.postman.com/downloads/) if you haven't already.
2. [Import the UUID vs JWT Postman Collection](https://learning.postman.com/docs/getting-started/importing-and-exporting-data/#importing-postman-data) into your Postman app.
3. Set the required environment variables for the requests.


### Setting Environment Variables

The Develoci Postman Collection requires the following environment variables to be set in order to use the pre-configured API requests:

| Variable | Description |
| -------- | ----------- |
| `sfccDomain` | The SFCC hostname (e.g., demandware.net) |
| `sfccStorefrontDomain` | The storefront hostname |
| `site_id` | The site ID from Business Manager |
| `client_id` | The client ID from Account Manager |
| `client_secret` | The secret generated with the client ID on Account Manager |
| `access_token_data` | Leave empty |
| `access_token_shop` | Leave empty |
| `order_no` | The order number from Business Manager |
| `inventory_id` | The inventory ID from Business Manager |
| `product_id` | The product ID from the catalog |
| `client_assertion` | Leave empty |
| `basicAuthorization` | Leave empty |
| `key_perm` | The key permission generated by OpenSSL |
| `BasicBMUser` | Leave empty |


Once you have set the environment variables, you can start using the pre-configured endpoints.

## How to use this Collection

<iframe width="560" height="315" src="https://www.youtube.com/embed/dTcip5-__kM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Useful Links

Here are some useful links related to this Postman Collection:

- [SF First Announcement](https://help.salesforce.com/s/articleView?language=en_US&id=000390352&type=1)
- [Time to Switch](https://help.salesforce.com/s/articleView?language=en_US&id=000394343&type=1)
- [Official Documentation](https://documentation.b2c.commercecloud.salesforce.com/DOC1/index.jsp?topic=%2Fcom.demandware.dochelp%2Fcontent%2Fb2c_commerce%2Ftopics%2Faccount_manager%2Fb2c_account_manager_add_api_client_id.html&cp=0_11_17)
- [OpenSSL](https://sourceforge.net/projects/openssl/)

These links provide additional information and resources that can be useful.

## Contributing

If you encounter any issues while using this Postman Collection or would like to contribute to the collection, feel free to open an issue or pull request on GitHub.

## Credits

Created by [Develoci](https://www.develoci.com/).
Contact use on the email weare@develoci.com

## License

The Develoci Postman Collection is released under the [MIT License](LICENSE). Feel free to use and modify this collection for your own purposes!
